!servalias rhitdie embed
{{set('die', '%1%' if '%1'+'%'!='%1%' else 'd')}}
{{set('dieStr', "Hit Dice (" + ('d'+die if die[0]!='d' else die) + ")")}}
{{set('dieDelta', '%2%' if '%2'+'%'!='%2%' else 0)}}
{{set('error', die == 'd')}}
{{error or mod_cc(dieStr, int(dieDelta))}}
{{set('currentDie', 0 if error else get_cc(dieStr))}}
{{set('maxDie', 0 if error else get_cc_max(dieStr))}}

{{'''-title "<name> regains spent Hit Dice!" \n-desc "At the end of a long rest, you regain spent Hit Dice, up to a number of dice equal to half your total number of them." \n-f "$d|$c / $m"\n-footer "Adventuring | PHB 186" \n-thumb "<image>"\n-color "<color>"\n'''.replace('$d', dieStr).replace('$c', str(currentDie)).replace('$m', str(maxDie)) if not error else '''-title "Incorrect usage of *rhitdie*"\n-desc "\n**Examples of correct usage:**\n!rhitdie d6 +1\n!rhitdie d8 2\n!rhitdie d8\n!rhitdie d12 -2\n!rhitdie 10 +3"'''}}